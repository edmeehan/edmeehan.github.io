!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=30)}({30:function(e,t,n){"use strict";n.r(t);n(8);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=this,s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;this.eventLabel=n,this.elements=t,this.boundaryArray=[],this.scrollTop=window.scrollY||window.pageYOffset,t.length>0&&(this.resized(),window.addEventListener("resize",function(e){i.resized()}),s&&function e(){var t=window.scrollY||window.pageYOffset;if(o.scrollTop===t)return void s(e);o.scrollTop=t,o.scroll(),s(e)}())}var t,n,o;return t=e,(n=[{key:"resized",value:function(){this.windowHeight=window.innerHeight,this.windowHalf=Math.round(.5*this.windowHeight),this.documentHeight=document.body.offsetHeight,this.documentHalf=Math.round(.5*this.documentHeight),this.measure()}},{key:"measure",value:function(e){e&&Array.isArray(e)&&(this.elements=e);for(var t=this.elements.length;t--;){var n=this.elements[t].offsetTop,i=this.elements[t].offsetHeight,o=n+i;this.boundaryArray[t]={top:n,height:i,bottom:o,index:t}}}},{key:"scroll",value:function(){var e,t=this.boundaryArray.slice(0),n=!1,i=this.scrollTop+this.windowHeight,o=this.scrollTop+this.windowHalf;this.scrollTop+this.windowHalf<this.documentHalf&&(n=!0,t.reverse());for(var s=t.length;s--&&!(n&&i<t[s].top)&&(n||!(this.scrollTop>t[s].bottom));)t[s].top<i&&t[s].bottom>this.scrollTop&&(e=t[s].top<this.scrollTop?t[s].bottom<i?"top":"large":t[s].bottom<i?"small":"bottom",this.elements[t[s].index].dispatchEvent(new CustomEvent(this.eventLabel,{bubbles:!1,detail:{visibility:e,window:{top:this.scrollTop,bottom:i,middle:o,height:this.windowHeight},element:{top:t[s].top,bottom:t[s].bottom,height:t[s].height}}})))}},{key:"boundary",get:function(){return this.boundaryArray}}])&&i(t.prototype,n),o&&i(t,o),e}();function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}!function(e){window.sections=e;var t=function e(t){this===t.target&&(this.style.display="none",this.removeEventListener("transitionend",e),window.activeAside=null)},n=function(e){var n=e.detail,o=e.element||document.querySelector(n.target);o.addEventListener("transitionend",t),o.classList.remove("active"),i.classList.remove("active"),document.body.classList.remove("locked")},i=document.getElementById("document");if(i){i.addEventListener("aside.show",function(e){var t=e.detail,o=e.element||document.querySelector(t.target);if(window.activeAside){if(o===window.activeAside)return;n({element:window.activeAside})}window.activeAside=o,o.style.display=null,setTimeout(function(){o.classList.add("active"),i.classList.add("active"),document.body.classList.add("locked")},50)}),i.addEventListener("aside.hide",n);var o=!0,s=!1,r=void 0;try{for(var a,l=document.getElementsByClassName("js-aside-show")[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){a.value.addEventListener("click",function(e){i.dispatchEvent(new CustomEvent("aside.show",{bubbles:!1,detail:this.dataset}))})}}catch(e){s=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw r}}var c=!0,d=!1,u=void 0;try{for(var h,v=document.getElementsByClassName("js-aside-hide")[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){h.value.addEventListener("click",function(e){i.dispatchEvent(new CustomEvent("aside.hide",{bubbles:!1,detail:this.dataset}))})}}catch(e){d=!0,u=e}finally{try{c||null==v.return||v.return()}finally{if(d)throw u}}}var f=document.getElementById("page-shadow");f&&f.addEventListener("click",function(e){window.activeAside&&n({element:window.activeAside})})}(new(function(){function e(t){var n=t.sections,i=t.background,s=t.randomCeiling,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"view_event",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"background",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"visible",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"active";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.backgroundClass=a,this.backgroundVisibleClass=l,this.eventLabel=r,this.sectionsEle=n,this.backgroundEle=i,this.viewEvents=new o(n,"".concat(r,"_visible")),this.randomCeiling=s,this.prevRandom=null,this.sectionInFocus=null,this.sectionInFocusClass=c;var d=!0,u=!1,h=void 0;try{for(var v,f=n[Symbol.iterator]();!(d=(v=f.next()).done);d=!0){v.value.addEventListener("".concat(this.eventLabel,"_visible"),this.isVisible.bind(this))}}catch(e){u=!0,h=e}finally{try{d||null==f.return||f.return()}finally{if(u)throw h}}this.viewEvents.scroll()}var t,n,i;return t=e,(n=[{key:"isVisible",value:function(e){this.sectionInFocus!==e.target&&e.detail.element.top<e.detail.window.middle&&e.detail.element.bottom>e.detail.window.middle&&(null!==this.sectionInFocus&&this.sectionInFocus.dispatchEvent(new CustomEvent("".concat(this.eventLabel,"_blur"),{bubbles:!1})),this.sectionInFocus=e.target,this.changeBackground(),this.sectionInFocus.dispatchEvent(new CustomEvent("".concat(this.eventLabel,"_focus"),{bubbles:!1})))}},{key:"changeBackground",value:function(){var e,t=document.createElement("div");do{e=Math.floor(Math.random()*this.randomCeiling)+1}while(e===this.prevRandom);this.prevRandom=e,t.classList.add(this.backgroundClass,"".concat(this.backgroundClass,"__").concat(e));var n=!0,i=!1,o=void 0;try{for(var s,r=this.backgroundEle.children[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var a=s.value;a.classList.remove("".concat(this.backgroundClass,"--").concat(this.backgroundVisibleClass)),a.addEventListener("transitionend",function(){this.remove()})}}catch(e){i=!0,o=e}finally{try{n||null==r.return||r.return()}finally{if(i)throw o}}this.backgroundEle.appendChild(t),setTimeout(function(){t.classList.add("".concat(this.backgroundClass,"--").concat(this.backgroundVisibleClass))}.bind(this),5)}},{key:"sections",get:function(){return this.sectionsEle}},{key:"background",get:function(){return this.backgroundEle}},{key:"active_section",get:function(){return this.sectionInFocus}},{key:"view_event",get:function(){return this.viewEvents}}])&&s(t.prototype,n),i&&s(t,i),e}())({sections:document.getElementsByClassName("js-scroll-in-view"),background:document.getElementById("page-background"),randomCeiling:window.backgroundCount||1}))},8:function(e,t){!function(){if("undefined"!=typeof window)try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var n,i;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i=n.preventDefault,n.preventDefault=function(){i.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};t.prototype=window.Event.prototype,window.CustomEvent=t}}()}});
//# sourceMappingURL=main.js.map