{"version":3,"sources":["webpack:///./node_modules/custom-event-polyfill/polyfill.js","webpack:///./_javascript/modules/change_background.js","webpack:///./_javascript/modules/utilities.js","webpack:///./_javascript/main.js","webpack:///./_javascript/modules/scroll_into_view.js"],"names":["window","ce","CustomEvent","cancelable","preventDefault","defaultPrevented","Error","e","event","params","evt","origPrevent","bubbles","document","createEvent","initCustomEvent","detail","call","this","Object","defineProperty","get","prototype","Event","sections","background","randomCeiling","backgroundEle","prevRandom","sectionInFocus","scroll","add","forEach","item","addEventListener","isVisible","bind","target","focused","changeBackground","random","div","createElement","Math","floor","children","child","classList","remove","appendChild","setTimeout","loadScript","path","ref","getElementsByTagName","script","src","parentNode","insertBefore","shadow","getElementById","docEle","contactFields","querySelectorAll","hideEndEvent","style","display","removeEventListener","activeAside","liveChatOpen","liveChatScriptPath","asideHideEvent","aside","element","querySelector","body","loadContactScript","contactScriptPath","field","ChangeBackground","backgroundCount","scrollToTargetListerner","name","dataset","scrollTo","rect","getBoundingClientRect","offset","pageYOffset","documentElement","scrollTop","top","labelName","substring","eventName","dataLayer","push","getElementsByClassName","asideShow","dispatchEvent","asideHide","ScrollIntoView","eventLabel","watchArray","rafId","undefined","rafActive","windowHeight","resized","nodeList","concat","filter","indexOf","setup","innerHeight","scrollY","startAnimation","length","requestAnimationFrame","updateAnimation","height","half","pixels","bottom","node","toFixed","cancelAnimationFrame"],"mappings":"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","file":"main.js","sourcesContent":["// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","import scroll from './scroll_into_view';\n\nexport default class {\n  constructor(sections, background, randomCeiling) {\n    // Set arguments to properties\n    this.backgroundEle = background;\n    this.randomCeiling = randomCeiling;\n    // some other properties\n    this.prevRandom = null;\n    this.sectionInFocus = null;\n    // add the elements to watch to start firing events\n    scroll.add(sections);\n    // add visibile listener\n    [...sections].forEach((item) => {\n      item.addEventListener(scroll.event, this.isVisible.bind(this));\n    });\n  }\n\n  get active_section() {\n    return this.sectionInFocus;\n  }\n\n  /**\n   * bound to custom event listener\n   * called when element comes into view\n   */\n  isVisible({ target, detail: { focused } }) {\n    if (this.sectionInFocus !== target && focused) {\n      this.sectionInFocus = target;\n      this.changeBackground();\n    }\n  }\n\n  /**\n   * changes background graphic by random\n   * TODO: maybe make more options here and break up\n   */\n  changeBackground() {\n    const div = document.createElement('div'),\n      backgroundClass = 'background',\n      backgroundVisibleClass = 'background--visible';\n\n    let random;\n\n    // get a new random number differnt from the last\n    do random = Math.floor(Math.random() * this.randomCeiling) + 1;\n    while (random === this.prevRandom);\n\n    this.prevRandom = random;\n\n    // find and remove old backgrounds element when\n    // transition has finished\n    [...this.backgroundEle.children].forEach((child) => {\n      child.classList.remove(backgroundVisibleClass);\n      child.addEventListener('transitionend', (item) => {\n        item.target.remove();\n      });\n    });\n\n    // add new background\n    div.classList.add(backgroundClass, `${backgroundClass}__${random}`);\n    this.backgroundEle.appendChild(div);\n\n    // add the class to trigger transition\n    setTimeout(() => {\n      div.classList.add(backgroundVisibleClass);\n    }, 5);\n  }\n}\n","const loadScript = (path) => {\n  const ref = document.getElementsByTagName('script')[0],\n    script = document.createElement('script');\n\n  script.src = path;\n  ref.parentNode.insertBefore(script, ref);\n};\n\nexport { loadScript };\n","// import Cookies from 'js-cookie';\nimport ChangeBackground from '@/modules/change_background';\nimport { loadScript } from '@/modules/utilities';\nimport 'custom-event-polyfill';\n\nconst shadow = document.getElementById('page-shadow'),\n  docEle = document.getElementById('document'),\n  contactFields = document.querySelectorAll('#contact-form input, #contact-form textarea');\n  // cookieNotice = Cookies.get('cookienotice');\n\n// section manager controls background and\n// events when sections become visible\nwindow.sections = new ChangeBackground(\n  document.querySelectorAll('[data-change-bkg]'),\n  document.getElementById('page-background'),\n  window.backgroundCount || 1,\n);\n\nfunction hideEndEvent({ target }) {\n  // condtion out bubbled events\n  if (this === target) {\n    this.style.display = 'none';\n    this.removeEventListener('transitionend', hideEndEvent);\n    window.activeAside = null;\n  }\n}\n\nfunction loadLiveChatScript() {\n  loadScript(window.liveChatScriptPath);\n  docEle.removeEventListener('aside.show', liveChatOpen);\n}\n\nfunction liveChatOpen({ detail: { target = null } }) {\n  if (target === '#aside-livechat') loadLiveChatScript();\n}\n\nfunction asideHideEvent({ detail: { target = null } = {}, element }) {\n  const aside = element || document.querySelector(target);\n  // add listener for end of transition event\n  aside.addEventListener('transitionend', hideEndEvent);\n  // add classes to trigger animation\n  aside.classList.remove('active');\n  docEle.classList.remove('active');\n  // locks body to prevent scrolling\n  document.body.classList.remove('locked');\n}\n\nfunction asideShowEvent({ detail: { target = null } = {}, element }) {\n  const aside = element || document.querySelector(target),\n    labelName = target.substring(1),\n    eventName = `show-${labelName}`;\n\n  // handle active aside first\n  // - can also toggle\n  if (window.activeAside) {\n    if (aside === window.activeAside) return;\n    asideHideEvent({ element: window.activeAside });\n  }\n\n  window.dataLayer.push({ 'event': eventName, 'event_label': labelName });\n\n  window.activeAside = aside;\n\n  aside.style.display = null;\n\n  setTimeout(() => {\n    // add classes to trigger animation\n    aside.classList.add('active');\n    docEle.classList.add('active');\n    // locks body to prevent scrolling\n    document.body.classList.add('locked');\n  }, 50);\n}\n\nfunction loadContactScript() {\n  loadScript(window.contactScriptPath);\n  [...contactFields].forEach((field) => {\n    field.removeEventListener('focus', loadContactScript);\n  });\n}\n\nconst scrollToTargetListerner = ({ target }) => {\n  const name = target.dataset.scrollTo,\n    targetNode = document.getElementById(name),\n    rect = targetNode.getBoundingClientRect(),\n    offset = window.pageYOffset || document.documentElement.scrollTop;\n\n  window.scrollTo(0, rect.top + offset);\n  return false;\n};\n\nif (docEle) {\n  docEle.addEventListener('aside.show', asideShowEvent);\n  docEle.addEventListener('aside.show', liveChatOpen);\n  docEle.addEventListener('aside.hide', asideHideEvent);\n\n  [...document.getElementsByClassName('js-aside-show')].forEach((asideShow) => {\n    asideShow.addEventListener('click', () => {\n      docEle.dispatchEvent(\n        new CustomEvent('aside.show', {\n          bubbles: false,\n          detail: asideShow.dataset,\n        })\n      );\n    });\n  });\n\n  [...document.getElementsByClassName('js-aside-hide')].forEach((asideHide) => {\n    asideHide.addEventListener('click', () => {\n      docEle.dispatchEvent(\n        new CustomEvent('aside.hide', {\n          bubbles: false,\n          detail: asideHide.dataset,\n        })\n      );\n    });\n  });\n}\n\nif (shadow) {\n  shadow.addEventListener('click', () => {\n    if (window.activeAside) asideHideEvent({ element: window.activeAside });\n  });\n}\n\nif (contactFields) {\n  [...contactFields].forEach((field) => {\n    field.addEventListener('focus', loadContactScript);\n  });\n}\n\n// if (!cookieNotice) {\n//   console.log(cookieNotice);\n// }\n\n// scroll to triggers\n[...document.querySelectorAll('[data-scroll-to]')].forEach((item) => {\n  item.addEventListener('click', scrollToTargetListerner);\n});\n","import 'custom-event-polyfill';\n\nclass ScrollIntoView {\n  constructor() {\n    // Set arguments to properties\n    this.eventLabel = 'is_visible';\n    this.watchArray = [];\n    // Utility variables for `requestAnimationFrame`\n    this.rafId = undefined;\n    this.rafActive = false;\n    // Stuff\n    this.target = 0;\n    this.windowHeight = 0;\n    // Add listeners and start this party\n    window.addEventListener('scroll', this.scroll.bind(this));\n    window.addEventListener('resize', this.resized.bind(this));\n  }\n\n  get event() {\n    return this.eventLabel;\n  }\n\n  get watching() {\n    return this.watchArray;\n  }\n\n  /**\n   * add elements to watch and trigger events from\n   * does not work with single node return and must be\n   * a nodeList or htmlcollection\n   * TODO: make work for single or collection of nodes\n   */\n  add(nodeList) {\n    this.watchArray = this.watchArray.concat(\n      // make sure not to add duplicates\n      [...nodeList].filter((item) => this.watchArray.indexOf(item) < 0)\n    );\n    this.setup();\n  }\n\n  /**\n   * remove elements from watch\n   */\n  remove(nodeList) {\n    this.watchArray = this.watchArray.filter((item) => [...nodeList].indexOf(item) < 0);\n    this.setup();\n  }\n\n  /**\n   * getting dimensions info\n   * and other layout information\n   */\n  setup() {\n    this.windowHeight = window.innerHeight;\n    this.target = window.scrollY || window.pageYOffset;\n\n    this.startAnimation();\n  }\n\n  /**\n   * Acts as a throttle for scrolling listener\n   * checks to see if animation frame has been\n   * requested and if so then let it handle the\n   * callback\n   */\n  startAnimation() {\n    if (!this.rafActive && this.watchArray.length > 0) {\n      this.rafActive = true;\n      this.rafId = requestAnimationFrame(this.updateAnimation.bind(this));\n    }\n  }\n\n  /**\n   * Request Animation Frame Callback\n   * This is the work horse function\n   * safe to place more complex logic\n   * here - but don't be greedy\n   */\n  updateAnimation() {\n    const height = this.windowHeight,\n      half = (height / 2);\n    // loops array and filters out visable elements\n    // and adds some info to use in the UI\n    this.watchArray.forEach((item) => {\n      const rect = item.getBoundingClientRect(),\n        isVisable = rect.top < height && rect.bottom > 0;\n      let pixels;\n\n      if (!isVisable) return false;\n\n      // simple math to show % of visable element on screen\n      pixels = height - rect.bottom;\n      pixels = height - (rect.top > 0 ? rect.top : 0) - (pixels > 0 ? pixels : 0);\n\n      item.dispatchEvent(\n        new CustomEvent(this.eventLabel, {\n          bubbles: false,\n          detail: {\n            rect,\n            node: (pixels / rect.height).toFixed(3) * 1,\n            window: (pixels / height).toFixed(3) * 1,\n            focused: rect.top < half && rect.bottom > half\n          }\n        })\n      );\n\n      return true;\n    });\n\n    this.rafActive = false;\n    cancelAnimationFrame(this.rafId);\n  }\n\n  // bound to resize event\n  resized() {\n    this.setup();\n  }\n\n  // bound to scroll event\n  scroll() {\n    this.target = window.scrollY || window.pageYOffset;\n    this.startAnimation();\n  }\n}\n\nexport default new ScrollIntoView();\n"],"sourceRoot":""}