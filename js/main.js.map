{"version":3,"sources":["webpack:///./_javascript/main.js","webpack:///./_javascript/modules/change_background.js","webpack:///./_javascript/modules/scroll_into_view.js","webpack:///./node_modules/custom-event-polyfill/polyfill.js"],"names":["shadow","document","getElementById","docEle","contactFields","querySelectorAll","window","sections","ChangeBackground","backgroundCount","hideEndEvent","target","style","display","removeEventListener","activeAside","asideHideEvent","detail","element","aside","querySelector","addEventListener","classList","remove","body","asideShowEvent","labelName","substring","eventName","dataLayer","push","setTimeout","add","loadContactScript","ref","getElementsByTagName","script","createElement","src","contactScriptPath","parentNode","insertBefore","forEach","field","scrollToTargetListerner","name","dataset","scrollTo","targetNode","rect","getBoundingClientRect","offset","pageYOffset","documentElement","scrollTop","top","getElementsByClassName","asideShow","dispatchEvent","CustomEvent","bubbles","asideHide","item","constructor","background","randomCeiling","backgroundEle","prevRandom","sectionInFocus","scroll","event","isVisible","bind","active_section","focused","changeBackground","div","backgroundClass","backgroundVisibleClass","random","Math","floor","children","child","appendChild","ScrollIntoView","eventLabel","watchArray","rafId","undefined","rafActive","windowHeight","resized","watching","nodeList","concat","filter","indexOf","setup","innerHeight","scrollY","startAnimation","length","requestAnimationFrame","updateAnimation","height","half","isVisable","bottom","pixels","node","toFixed","cancelAnimationFrame","ce","cancelable","preventDefault","defaultPrevented","Error","e","params","evt","origPrevent","createEvent","initCustomEvent","call","Object","defineProperty","get","prototype","Event"],"mappings":"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","file":"main.js","sourcesContent":["import ChangeBackground from './modules/change_background';\nimport 'custom-event-polyfill';\n\nconst shadow = document.getElementById('page-shadow'),\n  docEle = document.getElementById('document'),\n  contactFields = document.querySelectorAll('#contact-form input, #contact-form textarea');\n\n// section manager controls background and\n// events when sections become visible\nwindow.sections = new ChangeBackground(\n  document.querySelectorAll('[data-change-bkg]'),\n  document.getElementById('page-background'),\n  window.backgroundCount || 1,\n);\n\nfunction hideEndEvent({ target }) {\n  // condtion out bubbled events\n  if (this === target) {\n    this.style.display = 'none';\n    this.removeEventListener('transitionend', hideEndEvent);\n    window.activeAside = null;\n  }\n}\n\nfunction asideHideEvent({ detail: { target }, element }) {\n  const aside = element || document.querySelector(target);\n  // add listener for end of transition event\n  aside.addEventListener('transitionend', hideEndEvent);\n  // add classes to trigger animation\n  aside.classList.remove('active');\n  docEle.classList.remove('active');\n  // locks body to prevent scrolling\n  document.body.classList.remove('locked');\n}\n\nfunction asideShowEvent({ detail: { target }, element }) {\n  const aside = element || document.querySelector(target),\n    labelName = target.substring(1),\n    eventName = `show-${labelName}`;\n\n  // handle active aside first\n  // - can also toggle\n  if (window.activeAside) {\n    if (aside === window.activeAside) return;\n    asideHideEvent({ element: window.activeAside });\n  }\n\n  window.dataLayer.push({ 'event': eventName, 'event_label': labelName });\n\n  window.activeAside = aside;\n\n  aside.style.display = null;\n\n  setTimeout(() => {\n    // add classes to trigger animation\n    aside.classList.add('active');\n    docEle.classList.add('active');\n    // locks body to prevent scrolling\n    document.body.classList.add('locked');\n  }, 50);\n}\n\nfunction loadContactScript() {\n  const ref = document.getElementsByTagName('script')[0],\n    script = document.createElement('script');\n\n  script.src = window.contactScriptPath;\n  ref.parentNode.insertBefore(script, ref);\n  [...contactFields].forEach((field) => {\n    field.removeEventListener('focus', loadContactScript);\n  });\n}\n\nconst scrollToTargetListerner = ({ target }) => {\n  const name = target.dataset.scrollTo,\n    targetNode = document.getElementById(name),\n    rect = targetNode.getBoundingClientRect(),\n    offset = window.pageYOffset || document.documentElement.scrollTop;\n\n  window.scrollTo(0, rect.top + offset);\n  return false;\n};\n\nif (docEle) {\n  docEle.addEventListener('aside.show', asideShowEvent);\n  docEle.addEventListener('aside.hide', asideHideEvent);\n\n  [...document.getElementsByClassName('js-aside-show')].forEach((asideShow) => {\n    asideShow.addEventListener('click', () => {\n      docEle.dispatchEvent(\n        new CustomEvent('aside.show', {\n          bubbles: false,\n          detail: asideShow.dataset,\n        })\n      );\n    });\n  });\n\n  [...document.getElementsByClassName('js-aside-hide')].forEach((asideHide) => {\n    asideHide.addEventListener('click', () => {\n      docEle.dispatchEvent(\n        new CustomEvent('aside.hide', {\n          bubbles: false,\n          detail: asideHide.dataset,\n        })\n      );\n    });\n  });\n}\n\nif (shadow) {\n  shadow.addEventListener('click', () => {\n    if (window.activeAside) asideHideEvent({ element: window.activeAside });\n  });\n}\n\nif (contactFields) {\n  [...contactFields].forEach((field) => {\n    field.addEventListener('focus', loadContactScript);\n  });\n}\n\n// scroll to triggers\n[...document.querySelectorAll('[data-scroll-to]')].forEach((item) => {\n  item.addEventListener('click', scrollToTargetListerner);\n});\n","import scroll from './scroll_into_view';\n\nexport default class {\n  constructor(sections, background, randomCeiling) {\n    // Set arguments to properties\n    this.backgroundEle = background;\n    this.randomCeiling = randomCeiling;\n    // some other properties\n    this.prevRandom = null;\n    this.sectionInFocus = null;\n    // add the elements to watch to start firing events\n    scroll.add(sections);\n    // add visibile listener\n    [...sections].forEach((item) => {\n      item.addEventListener(scroll.event, this.isVisible.bind(this));\n    });\n  }\n\n  get active_section() {\n    return this.sectionInFocus;\n  }\n\n  /**\n   * bound to custom event listener\n   * called when element comes into view\n   */\n  isVisible({ target, detail: { focused } }) {\n    if (this.sectionInFocus !== target && focused) {\n      this.sectionInFocus = target;\n      this.changeBackground();\n    }\n  }\n\n  /**\n   * changes background graphic by random\n   * TODO: maybe make more options here and break up\n   */\n  changeBackground() {\n    const div = document.createElement('div'),\n      backgroundClass = 'background',\n      backgroundVisibleClass = 'background--visible';\n\n    let random;\n\n    // get a new random number differnt from the last\n    do random = Math.floor(Math.random() * this.randomCeiling) + 1;\n    while (random === this.prevRandom);\n\n    this.prevRandom = random;\n\n    // find and remove old backgrounds element when\n    // transition has finished\n    [...this.backgroundEle.children].forEach((child) => {\n      child.classList.remove(backgroundVisibleClass);\n      child.addEventListener('transitionend', (item) => {\n        item.target.remove();\n      });\n    });\n\n    // add new background\n    div.classList.add(backgroundClass, `${backgroundClass}__${random}`);\n    this.backgroundEle.appendChild(div);\n\n    // add the class to trigger transition\n    setTimeout(() => {\n      div.classList.add(backgroundVisibleClass);\n    }, 5);\n  }\n}\n","import 'custom-event-polyfill';\n\nclass ScrollIntoView {\n  constructor() {\n    // Set arguments to properties\n    this.eventLabel = 'is_visible';\n    this.watchArray = [];\n    // Utility variables for `requestAnimationFrame`\n    this.rafId = undefined;\n    this.rafActive = false;\n    // Stuff\n    this.target = 0;\n    this.windowHeight = 0;\n    // Add listeners and start this party\n    window.addEventListener('scroll', this.scroll.bind(this));\n    window.addEventListener('resize', this.resized.bind(this));\n  }\n\n  get event() {\n    return this.eventLabel;\n  }\n\n  get watching() {\n    return this.watchArray;\n  }\n\n  /**\n   * add elements to watch and trigger events from\n   * does not work with single node return and must be\n   * a nodeList or htmlcollection\n   * TODO: make work for single or collection of nodes\n   */\n  add(nodeList) {\n    this.watchArray = this.watchArray.concat(\n      // make sure not to add duplicates\n      [...nodeList].filter((item) => this.watchArray.indexOf(item) < 0)\n    );\n    this.setup();\n  }\n\n  /**\n   * remove elements from watch\n   */\n  remove(nodeList) {\n    this.watchArray = this.watchArray.filter((item) => [...nodeList].indexOf(item) < 0);\n    this.setup();\n  }\n\n  /**\n   * getting dimensions info\n   * and other layout information\n   */\n  setup() {\n    this.windowHeight = window.innerHeight;\n    this.target = window.scrollY || window.pageYOffset;\n\n    this.startAnimation();\n  }\n\n  /**\n   * Acts as a throttle for scrolling listener\n   * checks to see if animation frame has been\n   * requested and if so then let it handle the\n   * callback\n   */\n  startAnimation() {\n    if (!this.rafActive && this.watchArray.length > 0) {\n      this.rafActive = true;\n      this.rafId = requestAnimationFrame(this.updateAnimation.bind(this));\n    }\n  }\n\n  /**\n   * Request Animation Frame Callback\n   * This is the work horse function\n   * safe to place more complex logic\n   * here - but don't be greedy\n   */\n  updateAnimation() {\n    const height = this.windowHeight,\n      half = (height / 2);\n    // loops array and filters out visable elements\n    // and adds some info to use in the UI\n    this.watchArray.forEach((item) => {\n      const rect = item.getBoundingClientRect(),\n        isVisable = rect.top < height && rect.bottom > 0;\n      let pixels;\n\n      if (!isVisable) return false;\n\n      // simple math to show % of visable element on screen\n      pixels = height - rect.bottom;\n      pixels = height - (rect.top > 0 ? rect.top : 0) - (pixels > 0 ? pixels : 0);\n\n      item.dispatchEvent(\n        new CustomEvent(this.eventLabel, {\n          bubbles: false,\n          detail: {\n            rect,\n            node: (pixels / rect.height).toFixed(3) * 1,\n            window: (pixels / height).toFixed(3) * 1,\n            focused: rect.top < half && rect.bottom > half\n          }\n        })\n      );\n\n      return true;\n    });\n\n    this.rafActive = false;\n    cancelAnimationFrame(this.rafId);\n  }\n\n  // bound to resize event\n  resized() {\n    this.setup();\n  }\n\n  // bound to scroll event\n  scroll() {\n    this.target = window.scrollY || window.pageYOffset;\n    this.startAnimation();\n  }\n}\n\nexport default new ScrollIntoView();\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n"],"sourceRoot":""}