{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./_javascript/main.js","webpack:///./_javascript/modules/scroll_into_view.js","webpack:///./_javascript/modules/sections_manager.js","webpack:///./node_modules/custom-event-polyfill/polyfill.js"],"names":["window","sections","SectionManager","document","getElementsByClassName","getElementById","backgroundCount","docEle","addEventListener","asideShowEvent","asideHideEvent","asideShow","event","dispatchEvent","CustomEvent","bubbles","detail","dataset","asideHide","shadow","activeAside","element","hideEndEvent","target","style","display","removeEventListener","aside","querySelector","classList","remove","body","setTimeout","add","elements","eventLabel","elemArray","rafId","undefined","rafActive","windowHeight","scroll","bind","resized","setup","innerHeight","scrollY","pageYOffset","startAnimation","requestAnimationFrame","updateAnimation","height","half","forEach","item","rect","getBoundingClientRect","isVisable","top","bottom","pixels","node","toFixed","focused","cancelAnimationFrame","background","randomCeiling","sectionsArray","backgroundEle","prevRandom","sectionInFocus","viewEvents","ViewEvents","isVisible","changeBackground","div","createElement","backgroundClass","backgroundVisibleClass","random","Math","floor","children","child","appendChild"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./_javascript/main.js\");\n","import SectionManager from './modules/sections_manager';\n\n// section manager controls background and\n// events when sections become visible\nwindow.sections = new SectionManager(\n  document.getElementsByClassName('js-scroll-in-view'),\n  document.getElementById('page-background'),\n  window.backgroundCount || 1,\n);\n\nconst docEle = document.getElementById('document');\nif (docEle) {\n  docEle.addEventListener('aside.show', asideShowEvent);\n  docEle.addEventListener('aside.hide', asideHideEvent);\n\n  for (let asideShow of document.getElementsByClassName('js-aside-show')) {\n    asideShow.addEventListener('click', function(event) {\n      docEle.dispatchEvent(\n        new CustomEvent('aside.show', {\n          bubbles: false,\n          detail: this.dataset,\n        })\n      );\n    });\n  }\n\n  for (let asideHide of document.getElementsByClassName('js-aside-hide')) {\n    asideHide.addEventListener('click', function(event) {\n      docEle.dispatchEvent(\n        new CustomEvent('aside.hide', {\n          bubbles: false,\n          detail: this.dataset,\n        })\n      );\n    });\n  }\n}\n\nconst shadow = document.getElementById('page-shadow');\nif (shadow) {\n  shadow.addEventListener('click', () => {\n    if (window.activeAside) asideHideEvent({ element: window.activeAside });\n  });\n}\n\nfunction hideEndEvent(event) {\n  // condtion out bubbled events\n  if (this === event.target) {\n    this.style.display = 'none';\n    this.removeEventListener('transitionend', hideEndEvent);\n    window.activeAside = null;\n  }\n}\n\nfunction asideHideEvent({ detail, element }) {\n  const aside = element || document.querySelector(detail.target);\n  // add listener for end of transition event\n  aside.addEventListener('transitionend', hideEndEvent);\n  // add classes to trigger animation\n  aside.classList.remove('active');\n  docEle.classList.remove('active');\n  // locks body to prevent scrolling\n  document.body.classList.remove('locked');\n}\n\nfunction asideShowEvent({ detail, element }) {\n  const aside = element || document.querySelector(detail.target);\n\n  // handle active aside first\n  // - can also toggle\n  if (window.activeAside) {\n    if (aside === window.activeAside) return;\n    asideHideEvent({ element: window.activeAside });\n  }\n\n  window.activeAside = aside;\n\n  aside.style.display = null;\n\n  setTimeout(() => {\n    // add classes to trigger animation\n    aside.classList.add('active');\n    docEle.classList.add('active');\n    // locks body to prevent scrolling\n    document.body.classList.add('locked');\n  }, 50);\n}\n","import 'custom-event-polyfill';\n\nexport default class {\n  constructor(elements, eventLabel) {\n    // Set arguments to properties\n    this.eventLabel = eventLabel;\n    this.elemArray = [...elements]; // convert nodelist or html collection to array\n    // Utility variables for `requestAnimationFrame`\n    this.rafId = undefined;\n    this.rafActive = false;\n    // Stuff\n    this.target = 0;\n    this.windowHeight = 0;\n    // Add listeners and start this party\n    window.addEventListener('scroll', this.scroll.bind(this));\n    window.addEventListener('resize', this.resized.bind(this));\n    // Now we are ready\n    this.setup();\n  }\n\n  /**\n   * getting dimensions info\n   * and other layout information\n   */\n  setup() {\n    this.windowHeight = window.innerHeight;\n    this.target = window.scrollY || window.pageYOffset;\n\n    this.startAnimation();\n  }\n\n  /**\n   * Acts as a throttle for scrolling listener\n   * checks to see if animation frame has been\n   * requested and if so then let it handle the\n   * callback\n   */\n  startAnimation() {\n    if (!this.rafActive) {\n      this.rafActive = true;\n      this.rafId = requestAnimationFrame(this.updateAnimation.bind(this));\n    }\n  }\n\n  /**\n   * Request Animation Frame Callback\n   * This is the work horse function\n   * safe to place more complex logic\n   * here - but don't be greedy\n   */\n  updateAnimation() {\n    const height = this.windowHeight,\n      half = (height / 2);\n    // loops array and filters out visable elements\n    // and adds some info to use in the UI\n    this.elemArray.forEach((item) => {\n      const rect = item.getBoundingClientRect(),\n        isVisable = rect.top < height && rect.bottom > 0;\n      let pixels;\n\n      if (!isVisable) return false;\n\n      // simple math to show % of visable element on screen\n      pixels = height - rect.bottom;\n      pixels = height - (rect.top > 0 ? rect.top : 0) - (pixels > 0 ? pixels : 0);\n\n      item.dispatchEvent(\n        new CustomEvent(this.eventLabel, {\n          bubbles: false,\n          detail: {\n            node: (pixels / rect.height).toFixed(3) * 1,\n            window: (pixels / height).toFixed(3) * 1,\n            focused: rect.top < half && rect.bottom > half\n          }\n        })\n      );\n\n      return true;\n    });\n\n    this.rafActive = false;\n    cancelAnimationFrame(this.rafId);\n  }\n\n  // bound to resize event\n  resized() {\n    this.setup();\n  }\n\n  // bound to scroll event\n  scroll() {\n    this.target = window.scrollY || window.pageYOffset;\n    this.startAnimation();\n  }\n}\n","import ViewEvents from './scroll_into_view';\n\nexport default class {\n  constructor(sections, background, randomCeiling) {\n    const event = 'view_event_visible';\n    // Set arguments to properties\n    this.sectionsArray = [...sections];\n    this.backgroundEle = background;\n    this.randomCeiling = randomCeiling;\n    // some other properties\n    this.prevRandom = null;\n    this.sectionInFocus = null;\n    // set the events\n    this.viewEvents = new ViewEvents(sections, event);\n    // add visibile listener\n    this.sectionsArray.forEach((item) => {\n      item.addEventListener(event, this.isVisible.bind(this));\n    });\n  }\n\n  get sections() {\n    return this.sectionsArray;\n  }\n\n  get background() {\n    return this.backgroundEle;\n  }\n\n  get active_section() {\n    return this.sectionInFocus;\n  }\n\n  get view_event() {\n    return this.viewEvents;\n  }\n\n  /**\n   * bound to custom event listener\n   * called when element comes into view\n   */\n  isVisible(event) {\n    if (this.sectionInFocus !== event.target && event.detail.focused) {\n      this.sectionInFocus = event.target;\n      this.changeBackground();\n    }\n  }\n\n  /**\n   * changes background graphic by random\n   * TODO: maybe make more options here and break up\n   */\n  changeBackground() {\n    const div = document.createElement('div'),\n      backgroundClass = 'background',\n      backgroundVisibleClass = 'background--visible';\n    let random;\n\n    // get a new random number differnt from the last\n    do random = Math.floor(Math.random() * this.randomCeiling) + 1;\n    while (random === this.prevRandom);\n\n    this.prevRandom = random;\n\n    // find and remove old backgrounds element when\n    // transition has finished\n    [...this.backgroundEle.children].forEach((child) => {\n      child.classList.remove(backgroundVisibleClass);\n      child.addEventListener('transitionend', (item) => {\n        item.target.remove();\n      });\n    });\n\n    // add new background\n    div.classList.add(backgroundClass, `${backgroundClass}__${random}`);\n    this.backgroundEle.appendChild(div);\n\n    // add the class to trigger transition\n    setTimeout(() => {\n      div.classList.add(backgroundVisibleClass);\n    }, 5);\n  }\n}\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n"],"sourceRoot":""}