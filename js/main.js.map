{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./_javascript/main.js","webpack:///./_javascript/modules/scrolling_in_view.js","webpack:///./node_modules/custom-event-polyfill/polyfill.js"],"names":["sectionElements","document","getElementsByClassName","backgroundElement","getElementById","viewEvents","ViewEvents","elements","currentSection","backgroundNumber","isVisible","event","detail","element","top","window","middle","bottom","changeBackground","div","createElement","random","Math","floor","classList","add","children","oldbackground","remove","addEventListener","appendChild","setTimeout","item","scroll","that","raf","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","boundaryArray","scrollTop","scrollY","pageYOffset","length","resized","loop","windowHeight","innerHeight","windowHalf","round","documentHeight","body","offsetHeight","documentHalf","measure","updatedElements","Array","isArray","i","offsetTop","height","index","slice","flipped","scrollBottom","windowMiddle","visibility","reverse","dispatchEvent","CustomEvent","bubbles"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./_javascript/main.js\");\n","import \"custom-event-polyfill\";\nimport ViewEvents from './modules/scrolling_in_view';\n//import _ from 'lodash';\n\n(function() {\n    //'use strict';\n\n    let sectionElements = document.getElementsByClassName('js-scroll-in-view'),\n        backgroundElement = document.getElementById('page-background'),\n        viewEvents = new ViewEvents({elements:sectionElements}),\n        currentSection,\n        backgroundNumber;\n\n    function isVisible(event) {\n\n        if (\n            currentSection !== this &&\n            event.detail.element.top < event.detail.window.middle &&\n            event.detail.element.bottom > event.detail.window.middle\n        ) {\n            currentSection = this;\n\n            changeBackground(true);\n        }        \n    }\n\n    function changeBackground() {\n        let div = document.createElement('div'),\n            random;\n\n        // get a new random number differnt from the last\n        do\n          random = Math.floor(Math.random() * 8) + 1;\n        while (random === backgroundNumber);\n\n        backgroundNumber = random;\n\n        div.classList.add('background', 'background__' + random);\n\n        // find and remove old backgrounds\n        for (let oldbackground of backgroundElement.children) {\n            oldbackground.classList.remove('background--visible');\n            oldbackground.addEventListener('transitionend', function(){\n                this.remove();\n            });\n        }\n\n        backgroundElement.appendChild(div);\n\n        setTimeout(function(){\n            div.classList.add('background--visible');\n        }, 5);\n\n        \n    }\n\n    // add visibile listener\n    for (let item of sectionElements) {\n        item.addEventListener('is_visible', isVisible);\n    }\n\n    viewEvents.scroll();\n\n})();","export default class {\n\n    constructor({\n        elements\n    }) {\n        let that = this,\n            raf = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame;\n\n        // set some property values\n        this.elements = elements;\n        this.boundaryArray = [];\n        this.scrollTop = window.scrollY || window.pageYOffset;\n        \n        // if we have scroll elements, then lets do this.\n        if (elements.length > 0) {\n            // call function to get some measurements        \n            this.resized();\n\n            // resize listener\n            window.addEventListener('resize', (event) => {\n                this.resized();\n            });\n\n            if (raf) loop();\n        }\n\n        function loop() {\n            let scrollTop = window.scrollY || window.pageYOffset;\n\n            if (that.scrollTop === scrollTop) {\n                raf(loop);\n                return;\n            } else {\n                that.scrollTop = scrollTop;\n                that.scroll();\n                raf(loop);\n            }\n        }\n    }\n\n    get boundary() {\n        return this.boundaryArray;\n    }\n\n    resized() {\n        this.windowHeight = window.innerHeight;\n        this.windowHalf = Math.round(this.windowHeight * 0.5);\n        this.documentHeight = document.body.offsetHeight;\n        this.documentHalf = Math.round(this.documentHeight * 0.5);\n        this.measure();\n    }\n\n    measure(updatedElements) {\n        if (updatedElements && Array.isArray(updatedElements)) {\n            this.elements = updatedElements;\n        }\n        for (let i = this.elements.length; i--;) {\n            let top = this.elements[i].offsetTop,\n                height = this.elements[i].offsetHeight,\n                bottom = top + height;\n\n            this.boundaryArray[i] = {\n                top,\n                height,\n                bottom,\n                index: i\n            };\n        }\n    }\n\n    scroll() {\n        // clone array\n        let elements = this.boundaryArray.slice(0),\n            flipped = false,\n            scrollBottom = this.scrollTop + this.windowHeight,\n            windowMiddle = this.scrollTop + this.windowHalf,\n            visibility;\n        // check how far we scrolled - and flip the array to make\n        // searching faster\n        if ((this.scrollTop + this.windowHalf) < this.documentHalf) {\n            flipped = true;\n            elements.reverse();\n        }\n\n        for (let i = elements.length; i--;) {\n            // check if all other elements our out of the window\n            // and exit the loop to save some resources\n            if (flipped && scrollBottom < elements[i].top) break;\n            if (!flipped && this.scrollTop > elements[i].bottom) break;\n            // okay now check if the element is visible and by how much\n\n            // in order to be visible these basic rules must be true\n            if (elements[i].top < scrollBottom && elements[i].bottom > this.scrollTop) {\n\n                if (elements[i].top < this.scrollTop) {\n                    if (elements[i].bottom < scrollBottom) {\n                        // visible but off the top\n                        visibility = 'top';\n                    } else {\n                        // visible but bigger then screen\n                        visibility = 'large';\n                    }\n                } else {\n                    if (elements[i].bottom < scrollBottom) {\n                        // visible but smaller then screen\n                        visibility = 'small';\n                    } else {\n                        // visible but off bottom\n                        visibility = 'bottom';\n                    }\n                }\n\n                this.elements[elements[i].index].dispatchEvent(new CustomEvent('is_visible', {\n                    bubbles: false,\n                    detail: {\n                        visibility,\n                        window: {\n                            top: this.scrollTop,\n                            bottom: scrollBottom,\n                            middle: windowMiddle,\n                            height: this.windowHeight,\n                        },\n                        element: {\n                            top: elements[i].top,\n                            bottom: elements[i].bottom,\n                            height: elements[i].height\n                        }\n                    }\n                }));\n            }\n        }\n    }\n}","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {\n        bubbles: false,\n        cancelable: false,\n        detail: undefined\n      };\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n"],"sourceRoot":""}